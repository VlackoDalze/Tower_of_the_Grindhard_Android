<CustomLayout>
    canvas.before:
        Color:
            rgba: 0, 1, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size

<Root>
    ScreenManager:
        id: screen_manager
        Screen:
            name: 'login'
            RelativeLayout:
                Login:
                Control:
        Screen:
            name: 'menu'
            RelativeLayout:
                Menu:
                Control:
        Screen:
            name: 'mapa'
            RelativeLayout:
                Map_lvl:
                Control:   
   
<Login>
    RelativeLayout:
        size_hint: (1, 1)  # establece el tamaño del FloatLayout igual al de la ventana
        size: self.size  # establece el tamaño del FloatLayout igual al de la ventana

        Image:
            source:  'assets/gui/app_image/tower_of_the_grindhard_icon.png' #establece el lvl, formato 0? 2digitos
            size_hint: (None, None)  # desactiva tamaño
            size: self.parent.size  # establece el tamaño de la imagen al tamaño del FloatLayout
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # posición de la imagen en el FloatLayout centrado
            allow_stretch: True  # ajusta la imagen al tamaño del FloatLayout
            keep_ratio: False  # no conserva la relación de aspecto original de la imagen
    
        TextInput:
            id: username_input
            hint_text: 'Username' #hint
            pos_hint: {'center_x': 0.5, 'center_y': 0.55} #ubicacion
            multiline: False
            size_hint: 0.25, None #ancho
            height: self.minimum_height #latura minima
            halign: 'center' #centrado

        TextInput:
            id: password_input
            hint_text: 'Password'
            password: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            multiline: False
            size_hint: 0.25, None
            height: self.minimum_height
            halign: 'center'

        Button:
            text: 'Login'
            size_hint: 0.8, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            on_press:  app.root.ids.screen_manager.current = 'menu'
            size_hint: 0.25, 0.05
                
<Menu>
    RelativeLayout:
        size_hint: (1, 1)  # establece el tamaño del FloatLayout igual al de la ventana
        size: self.size  # establece el tamaño del FloatLayout igual al de la ventana

        Image:
            source:  'assets/gui/app_image/tower_of_the_grindhard_background_fhd.png' #establece el lvl, formato 0? 2digitos
            size_hint: (None, None)  # desactiva tamaño
            size: self.parent.size  # establece el tamaño de la imagen al tamaño del FloatLayout
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # posición de la imagen en el FloatLayout centrado
            allow_stretch: True  # ajusta la imagen al tamaño del FloatLayout
            keep_ratio: False  # no conserva la relación de aspecto original de la imagen
        Button:
            text: 'Select'
            size_hint: 0.8, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.2}
            on_press:  app.root.ids.screen_manager.current = 'mapa'
            size_hint: 0.25, 0.05

        
        

<Map_lvl>:
    RelativeLayout:
        size_hint: (1, 1)  # establece el tamaño del FloatLayout igual al de la ventana
        size: self.size  # establece el tamaño del FloatLayout igual al de la ventana

        Image:
            source:  f'scene/level{root.lvl:02d}/_composite.png' #establece el lvl, formato 0? 2digitos
            size_hint: (None, None)  # desactiva tamaño
            size: self.parent.size  # establece el tamaño de la imagen al tamaño del FloatLayout
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # posición de la imagen en el FloatLayout centrado
            allow_stretch: True  # ajusta la imagen al tamaño del FloatLayout
            keep_ratio: False  # no conserva la relación de aspecto original de la imagen

<Control>:
    StackLayout:
        orientation: 'tb-rl'
        padding: (0, 10, 5, 0)
        pos_hint: {'top': 1, 'right': 1}
        size_hint: .1,.125
        Button:#Settings
            size_hint: (None, None)
            size: (50,50)
            border: (0, 0, 0, 0)
            background_normal: './assets/gui/main/setting_icon.png'
            background_down: './assets/gui/main/setting_icon_pressed.png'
            opacity: 0.5
        Button:#Map
            size_hint: (None, None)
            size: (50,50)
            border: (0, 0, 0, 0)
            background_normal: './assets/gui/main/compass_icon.png'
            background_down: './assets/gui/main/compass_icon_pressed.png'
            opacity: 0.5
        Button:#Inventory
            size_hint: (None, None)
            size: (50,50)
            border: (0, 0, 0, 0)
            background_normal: './assets/gui/main/backpack_icon.png'
            background_down: './assets/gui/main/backpack_icon_pressed.png'
            opacity: 0.5
    FloatLayout:
        size_hint: (None, None)
        size: 100,100
        pos: '75dp','75dp'
        Button:
            size_hint: (None, None)
            size: (50,50)
            pos_hint: {'top': .5, 'right': 1}
            border: (0, 0, 0, 0)
            text:'>'
        Button:
            size_hint: (None, None)
            size: (50,50)
            pos_hint: {'top': .5, 'right': 0}
            border: (0, 0, 0, 0)
            text:'<'
        Button:
            size_hint: (None, None)
            size: (50,50)
            pos_hint: {'top': 1, 'right': .5}
            border: (0, 0, 0, 0)
            text:'^'
        Button:
            size_hint: (None, None)
            size: (50,50)
            pos_hint: {'top': 0, 'right': .5}
            border: (0, 0, 0, 0)
            text:'!'


<Root>
    ScreenManager:
        id: screen_manager
        Screen:
            name: 'menu'
            RelativeLayout:
                Menu:
                Control:
        Screen:
            name: 'mapa'
            RelativeLayout:
                Map_lvl:
                Control:   
   
